# virsh-sandbox Environment Configuration
#
# Copy this file to .env and customize for your setup.

# =============================================================================
# LIBVIRT CONNECTION
# =============================================================================

# SSH-based connection (recommended - works with Docker and production)
# For macOS: requires "Remote Login" enabled in System Settings > Sharing
# For production: point to your bare metal server running libvirt
LIBVIRT_URI=qemu:///session

# Alternative: Linux with local libvirt socket (no Docker support)
# LIBVIRT_URI=qemu:///system

# =============================================================================
# LIBVIRT SETTINGS
# =============================================================================

# Network configuration:
# - "default": Use libvirt NAT network (requires qemu:///system or active default network)
# - "user": Use SLIRP user-mode networking (works with qemu:///session, no SSH access)
# - "socket_vmnet": Use socket_vmnet for proper networking on macOS (recommended for dev)
# - "<name>": Any other libvirt network name
#
# For macOS development with SSH access to VMs:
#   1. Install socket_vmnet: brew install socket_vmnet
#   2. Start the service: sudo brew services start socket_vmnet
#   3. Set LIBVIRT_NETWORK=socket_vmnet
#   4. Set SOCKET_VMNET_WRAPPER to the wrapper script path
LIBVIRT_NETWORK=default

# Socket VMNet wrapper script (required when LIBVIRT_NETWORK=socket_vmnet)
# This script wraps QEMU with socket_vmnet_client for proper macOS networking
SOCKET_VMNET_WRAPPER=/path/to/virsh-sandbox/scripts/qemu-socket-vmnet-wrapper.sh

# Image directories (must be accessible from both host and container)
BASE_IMAGES_DIR=/var/lib/libvirt/images/base
JOBS_DIR=/var/lib/libvirt/images/jobs

# =============================================================================
# API SETTINGS
# =============================================================================

API_HTTP_ADDR=:8080

DATABASE_URL=postgresql://virsh_sandbox:virsh_sandbox@localhost:5432/virsh_sandbox

# =============================================================================
# VM DEFAULTS
# =============================================================================

DEFAULT_VCPUS=2
DEFAULT_MEMORY_MB=2048

# =============================================================================
# ANSIBLE DEFAULTS
# =============================================================================

ANSIBLE_INVENTORY_PATH=./.ansible/inventory/ # Where to store Ansible Inventory Files
ANSIBLE_IMAGE=ansible-sandbox # What image to use for running Ansible Playbooks
ANSIBLE_ALLOWED_PLAYBOOKS="" # Put a list of comma-seperated playbooks to only be run
ANSIBLE_PLAYBOOKS_DIR=./.ansible/playbooks/

# =============================================================================
# SSH CA Managed Credentials Setup
# =============================================================================
SSH_CA_KEY_PATH=./.ssh-ca/ssh_ca
SSH_CA_PUB_KEY_PATH=./.ssh-ca/ssh_ca.pub
SSH_KEY_DIR=/tmp/sandbox-keys/
SSH_CERT_TTL=300

# =============================================================================
# TIMEOUTS
# =============================================================================

COMMAND_TIMEOUT_SEC=600
IP_DISCOVERY_TIMEOUT_SEC=300

# =============================================================================
# LOGGING
# =============================================================================

LOG_FORMAT=text
LOG_LEVEL=info
