procs:
  postgres:
    cwd: "."
    shell: "docker-compose up postgres"
    stop: "SIGTERM"

  api:
    cwd: "api"
    shell: "go run ./cmd/api"
    env:
      LOG_FORMAT: "text"
      LOG_LEVEL: "debug"
      API_HTTP_ADDR: ":8080"
      LIBVIRT_URI: "qemu:///system"
      LIBVIRT_NETWORK: "default"
      BASE_IMAGE_DIR: "/var/lib/libvirt/images/base"
      SANDBOX_WORKDIR: "/var/lib/libvirt/images/jobs"
      DATABASE_URL: "postgresql://virsh_sandbox:virsh_sandbox@localhost:5432/virsh_sandbox"
      DEFAULT_VCPUS: "2"
      DEFAULT_MEMORY_MB: "2048"
      COMMAND_TIMEOUT_SEC: "600"
      IP_DISCOVERY_TIMEOUT_SEC: "120"

  tmux-client:
    cwd: "tmux-client"
    shell: "go run ./cmd/server"

  ansible-runner:
    cwd: "ansible-runner"
    shell: "uv run fastapi dev api/main.py --port 8000"

  frontend:
    cwd: "frontend"
    shell: "bun run dev"
