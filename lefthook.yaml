pre-commit:
  parallel: true
  commands:
    # Go - virsh-sandbox API
    fmt-virsh-sandbox:
      glob: "*.go"
      root: "virsh-sandbox"
      run: make fmt
      stage_fixed: true
    vet-virsh-sandbox:
      glob: "*.go"
      root: "virsh-sandbox"
      run: make vet
    test-virsh-sandbox:
      glob: "*.go"
      root: "virsh-sandbox"
      run: make test
    lint-virsh-sandbox:
      glob: "*.go"
      root: "virsh-sandbox"
      run: make lint

    # Python SDK
    fmt-sdk-black:
      glob: "*.py"
      root: "sdk/virsh-sandbox-py"
      run: black .
      stage_fixed: true
    fmt-sdk-isort:
      glob: "*.py"
      root: "sdk/virsh-sandbox-py"
      run: isort .
      stage_fixed: true
    # lint-sdk:
    #   glob: "*.py"
    #   root: "sdk/virsh-sandbox-py"
    #   run: ruff check . --fix
    #   stage_fixed: true
    test-sdk:
      glob: "*.py"
      root: "sdk/virsh-sandbox-py"
      run: python3 -m pytest test/ -v --tb=short

    # Web
    fmt-web:
      glob: "*.{ts,tsx,js,jsx,json,css,md}"
      root: "web"
      run: bun format
      stage_fixed: true
    lint-web:
      glob: "*.ts"
      root: "web"
      run: bun lint
