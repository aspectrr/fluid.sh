# fluid-remote API configuration
# Copy this file to config.yaml and modify as needed.
# Environment variables can override any setting for backward compatibility.

api:
  addr: ":8080"
  read_timeout: 60s
  write_timeout: 120s
  idle_timeout: 120s

hosts:
  - name: kvm-01
    address: 10.0.0.11
  - name: kvm-02
    address: 10.0.0.12

database:
  url: "postgresql://virsh_sandbox:virsh_sandbox@localhost:5432/virsh_sandbox"
  max_open_conns: 16
  max_idle_conns: 8
  conn_max_lifetime: 1h
  auto_migrate: true

telemetry:
  enable_anonymous_usage: true
  api_key: ""
  endpoint: "https://app.posthog.com"

libvirt:
  uri: "qemu:///system"
  network: "default"
  base_image_dir: "/var/lib/libvirt/images/base"
  work_dir: "/var/lib/libvirt/images/jobs"
  ssh_key_inject_method: "virt-customize" # or "cloud-init"
  # socket_vmnet_wrapper: "/path/to/qemu-socket-vmnet-wrapper.sh"  # macOS only

vm:
  default_vcpus: 2
  default_memory_mb: 2048
  command_timeout: 10m
  ip_discovery_timeout: 2m

ssh:
  # proxy_jump: "user@jumphost:22"  # optional: for VMs on isolated networks
  ca_key_path: "/etc/fluid-remote/ssh_ca"
  ca_pub_path: "/etc/fluid-remote/ssh_ca.pub"
  key_dir: "/tmp/sandbox-keys"
  cert_ttl: 5m
  max_ttl: 10m
  work_dir: "/tmp/sshca"
  default_user: "sandbox"

ansible:
  inventory_path: "./.ansible/inventory"
  playbooks_dir: "./.ansible/playbooks"
  image: "ansible-sandbox"
  allowed_playbooks:
    - "ping.yml"

logging:
  level: "info" # debug, info, warn, error
  format: "text" # text or json
